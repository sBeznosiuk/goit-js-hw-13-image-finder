{"version":3,"sources":["webpack:///./templates/imagesTemplate.hbs","webpack:///./index.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","escapeExpression","alias2","lambda","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","hooks","helperMissing","nullContext","stack1","program","noop","debounce","require","formRef","document","querySelector","galleryRef","bodyRef","addEventListener","e","event","handleImageLoad","query","value","innerHTML","clearMarkup","resetPage","fetchData","firstPageImages","buttonRef","createElement","textContent","setAttribute","appendChild","removeChild","console","log","children","buttonRender","searchQuery","page","apiKey","url","this","fetch","headers","then","res","json","hits","incrementPage","updateMarkup","markup","imagesTemplate","insertAdjacentHTML"],"mappings":"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","file":"main.1c87a7e431e98685d554.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=container.escapeExpression, alias2=container.lambda, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"photo-car\\\">\\r\\n  <img src=\\\"\"\n    + alias1(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":12},\"end\":{\"line\":3,\"column\":28}}}) : helper)))\n    + \"\\\" alt=\\\"\\\" width=\\\"320\\\" height=\\\"180\\\">\\r\\n  <div class=\\\"stats\\\">\\r\\n    <p class=\\\"stats-item\\\">\\r\\n      <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n      \"\n    + alias1(alias2((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\r\\n    </p>\\r\\n    <p class=\\\"stats-item\\\">\\r\\n      <i class=\\\"material-icons\\\">visibility</i>\\r\\n      \"\n    + alias1(alias2((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\r\\n    </p>\\r\\n    <p class=\\\"stats-item\\\">\\r\\n      <i class=\\\"material-icons\\\">comment</i>\\r\\n      \"\n    + alias1(alias2((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \"\\r\\n    </p>\\r\\n    <p class=\\\"stats-item\\\">\\r\\n      <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n      \"\n    + alias1(alias2((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\r\\n    </p>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":23,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","// import './styles.css';\r\nimport imagesTemplate from './templates/imagesTemplate.hbs';\r\n\r\nconst debounce = require('lodash.debounce');\r\n\r\nconst formRef = document.querySelector('#search-form input');\r\nconst galleryRef = document.querySelector('.gallery');\r\nconst bodyRef = document.querySelector('body');\r\n\r\nformRef.addEventListener(\r\n  'input',\r\n  debounce(e => {\r\n    firstPageImages();\r\n    buttonRender();\r\n    console.log(handleImageLoad);\r\n  }, 500),\r\n);\r\n\r\nconst handleImageLoad = {\r\n  searchQuery: '',\r\n  page: 1,\r\n  apiKey: '20744853-e6e709f705befc52cb2e1c259',\r\n\r\n  fetchData() {\r\n    const options = {\r\n      headers: {},\r\n    };\r\n    const url = `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${this.query}&page=${this.page}&per_page=12&key=${this.apiKey}`;\r\n\r\n    return fetch(url, options)\r\n      .then(res => res.json())\r\n      .then(({ hits }) => {\r\n        this.incrementPage();\r\n        return hits;\r\n      })\r\n      .then(updateMarkup)\r\n      .then(console.log(url));\r\n  },\r\n\r\n  incrementPage() {\r\n    this.page += 1;\r\n  },\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  },\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  },\r\n\r\n  set query(value) {\r\n    this.searchQuery = value;\r\n  },\r\n};\r\n\r\nfunction firstPageImages(event) {\r\n  handleImageLoad.query = formRef.value;\r\n  clearMarkup();\r\n  handleImageLoad.resetPage();\r\n  handleImageLoad.fetchData();\r\n\r\n  if (!formRef.value) {\r\n    return;\r\n  }\r\n}\r\n\r\nfunction updateMarkup(data) {\r\n  console.log(data);\r\n  const markup = imagesTemplate(data);\r\n  galleryRef.insertAdjacentHTML('beforeend', markup);\r\n}\r\n\r\nfunction clearMarkup() {\r\n  galleryRef.innerHTML = '';\r\n}\r\n\r\nfunction buttonRender() {\r\n  const buttonRef = document.createElement('button');\r\n  buttonRef.textContent = 'Load more...';\r\n  buttonRef.setAttribute('id', 'load-more');\r\n\r\n  if (bodyRef.querySelector('#load-more')) {\r\n    bodyRef.appendChild(buttonRef);\r\n    bodyRef.removeChild(buttonRef);\r\n  } else {\r\n    bodyRef.appendChild(buttonRef);\r\n  }\r\n  console.log(bodyRef.children.prototype);\r\n\r\n  buttonRef.addEventListener('click', () => {\r\n    handleImageLoad.fetchData();\r\n  });\r\n}\r\n"],"sourceRoot":""}