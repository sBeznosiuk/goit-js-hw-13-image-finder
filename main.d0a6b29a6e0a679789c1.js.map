{"version":3,"sources":["webpack:///./templates/imagesTemplate.hbs","webpack:///./index.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","escapeExpression","alias2","lambda","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","hooks","helperMissing","nullContext","stack1","program","noop","debounce","require","formRef","document","querySelector","galleryRef","loadMoreButtonRef","disabled","addEventListener","e","event","handleImageLoad","query","value","innerHTML","clearMarkup","resetPage","fetchData","firstPageImages","handleLoadMoreButton","enable","searchQuery","page","apiKey","url","this","fetch","headers","then","res","json","hits","incrementPage","updateMarkup","disable","console","log","markup","imagesTemplate","insertAdjacentHTML"],"mappings":"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","file":"main.d0a6b29a6e0a679789c1.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=container.escapeExpression, alias2=container.lambda, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<div class=\\\"photo-car\\\">\\r\\n  <img src=\\\"\"\n    + alias1(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : container.hooks.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":12},\"end\":{\"line\":3,\"column\":28}}}) : helper)))\n    + \"\\\" alt=\\\"\\\" width=\\\"320\\\" height=\\\"180\\\">\\r\\n  <div class=\\\"stats\\\">\\r\\n    <p class=\\\"stats-item\\\">\\r\\n      <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n      \"\n    + alias1(alias2((depth0 != null ? lookupProperty(depth0,\"likes\") : depth0), depth0))\n    + \"\\r\\n    </p>\\r\\n    <p class=\\\"stats-item\\\">\\r\\n      <i class=\\\"material-icons\\\">visibility</i>\\r\\n      \"\n    + alias1(alias2((depth0 != null ? lookupProperty(depth0,\"views\") : depth0), depth0))\n    + \"\\r\\n    </p>\\r\\n    <p class=\\\"stats-item\\\">\\r\\n      <i class=\\\"material-icons\\\">comment</i>\\r\\n      \"\n    + alias1(alias2((depth0 != null ? lookupProperty(depth0,\"comments\") : depth0), depth0))\n    + \"\\r\\n    </p>\\r\\n    <p class=\\\"stats-item\\\">\\r\\n      <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n      \"\n    + alias1(alias2((depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0), depth0))\n    + \"\\r\\n    </p>\\r\\n  </div>\\r\\n</div>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":23,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","// import './styles.css';\r\nimport imagesTemplate from './templates/imagesTemplate.hbs';\r\n\r\nconst debounce = require('lodash.debounce');\r\n\r\nconst formRef = document.querySelector('#search-form input');\r\nconst galleryRef = document.querySelector('.gallery');\r\nconst loadMoreButtonRef = document.querySelector('#load-more');\r\n\r\nlet loadMoreButton = (loadMoreButtonRef.disabled = true);\r\n\r\nformRef.addEventListener(\r\n  'input',\r\n  debounce(e => {\r\n    firstPageImages();\r\n    handleLoadMoreButton.enable();\r\n  }, 500),\r\n);\r\n\r\nloadMoreButtonRef.addEventListener('click', () => {\r\n  fetchData();\r\n});\r\n\r\nconst handleImageLoad = {\r\n  searchQuery: '',\r\n  page: 1,\r\n  apiKey: '20744853-e6e709f705befc52cb2e1c259',\r\n\r\n  fetchData() {\r\n    const options = {\r\n      headers: {},\r\n    };\r\n    const url = `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${this.query}&page=${this.page}&per_page=12&key=${this.apiKey}`;\r\n\r\n    return fetch(url, options)\r\n      .then(res => res.json())\r\n      .then(({ hits }) => {\r\n        this.incrementPage;\r\n        return hits;\r\n      })\r\n      .then(updateMarkup);\r\n  },\r\n\r\n  incrementPage() {\r\n    this.page++;\r\n  },\r\n\r\n  resetPage() {\r\n    this.page = 1;\r\n  },\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  },\r\n\r\n  set query(value) {\r\n    this.searchQuery = value;\r\n  },\r\n};\r\n\r\nconst handleLoadMoreButton = {\r\n  enable() {\r\n    loadMoreButton = loadMoreButtonRef.disabled = false;\r\n  },\r\n\r\n  disable() {\r\n    loadMoreButton = loadMoreButtonRef.disabled = true;\r\n  },\r\n};\r\n\r\nfunction firstPageImages(event) {\r\n  handleImageLoad.query = formRef.value;\r\n  clearMarkup();\r\n  handleImageLoad.resetPage();\r\n  fetchData();\r\n\r\n  if (!formRef.value) {\r\n    return;\r\n  }\r\n}\r\n\r\nfunction fetchData() {\r\n  handleImageLoad.fetchData().then(updateMarkup);\r\n}\r\n\r\nfunction updateMarkup(data) {\r\n  console.log(data);\r\n  const markup = imagesTemplate(data);\r\n  galleryRef.insertAdjacentHTML('beforeend', markup);\r\n}\r\n\r\nfunction clearMarkup() {\r\n  galleryRef.innerHTML = '';\r\n}\r\n"],"sourceRoot":""}